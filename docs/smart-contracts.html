<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Contracts - Lendefi Markets</title>
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #e5e7eb;
            background: #111827;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: rgba(17, 24, 39, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo span {
            background: linear-gradient(135deg, #0ea5e9, #14b8a6);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .nav-links {
            display: flex;
            gap: 2rem;
        }
        
        .nav-links a {
            color: #9ca3af;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .nav-links a:hover {
            color: #14b8a6;
        }
        
        main {
            padding: 2rem 0;
        }
        
        .docs-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .docs-header h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #0ea5e9, #14b8a6);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .docs-content {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 3rem;
        }
        
        .sidebar {
            background: rgba(17, 24, 39, 0.5);
            padding: 2rem;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            height: fit-content;
            position: sticky;
            top: 120px;
        }
        
        .sidebar h3 {
            color: #14b8a6;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }
        
        .sidebar ul {
            list-style: none;
        }
        
        .sidebar li {
            margin-bottom: 0.5rem;
        }
        
        .sidebar a {
            color: #9ca3af;
            text-decoration: none;
            padding: 0.5rem;
            display: block;
            border-radius: 6px;
            transition: all 0.3s;
        }
        
        .sidebar a:hover {
            background: rgba(20, 184, 166, 0.1);
            color: #14b8a6;
        }
        
        .content {
            background: rgba(17, 24, 39, 0.5);
            padding: 3rem;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .content h2 {
            color: #14b8a6;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .content h3 {
            color: #0ea5e9;
            margin: 2rem 0 1rem 0;
        }
        
        .content h4 {
            color: #f59e0b;
            margin: 1.5rem 0 0.75rem 0;
        }
        
        .content p, .content li {
            margin-bottom: 1rem;
            color: #d1d5db;
        }
        
        .content ul, .content ol {
            margin-left: 2rem;
            margin-bottom: 1rem;
        }
        
        .highlight {
            background: rgba(20, 184, 166, 0.1);
            border-left: 4px solid #14b8a6;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 6px 6px 0;
        }
        
        .warning {
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid #f59e0b;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 6px 6px 0;
        }
        
        .info-box {
            border-radius: 8px;
            padding: 16px;
            margin: 1rem 0;
        }
        
        .info-box.blue {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
        }
        
        .info-box.green {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        
        .info-box.yellow {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        
        .info-box.purple {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
        }
        
        .info-box.red {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        
        .contract-card {
            background: rgba(31, 41, 55, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .contract-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(20, 184, 166, 0.1);
        }
        
        .contract-title {
            color: #14b8a6;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .contract-address {
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.875rem;
            color: #9ca3af;
            background: rgba(17, 24, 39, 0.5);
            padding: 0.5rem;
            border-radius: 4px;
            margin: 0.5rem 0;
        }
        
        .code-block {
            background: #1f2937;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
            overflow-x: auto;
        }
        
        .code-block code {
            color: #e5e7eb;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.875rem;
        }
        
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin: 24px 0;
        }
        
        .network-selector {
            background: rgba(31, 41, 55, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            margin: 2rem 0;
            text-align: center;
        }
        
        .network-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .network-btn {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: #60a5fa;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .network-btn.active {
            background: rgba(20, 184, 166, 0.2);
            border-color: #14b8a6;
            color: #14b8a6;
        }
        
        .network-btn:hover {
            background: rgba(20, 184, 166, 0.1);
            color: #14b8a6;
        }
        
        .deployment-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        
        .deployment-table th,
        .deployment-table td {
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 0.75rem;
            text-align: left;
        }
        
        .deployment-table th {
            background: rgba(20, 184, 166, 0.1);
            color: #14b8a6;
        }
        
        .deployment-table td {
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.8rem;
        }
        
        .copy-btn {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: #a78bfa;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.75rem;
            margin-left: 0.5rem;
            transition: all 0.3s;
        }
        
        .copy-btn:hover {
            background: rgba(139, 92, 246, 0.2);
        }
        
        .abi-section {
            background: rgba(17, 24, 39, 0.8);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .abi-title {
            color: #f59e0b;
            font-weight: 600;
            margin-bottom: 0.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .abi-content {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 0.5rem;
            padding: 0.5rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
            display: none;
        }
        
        .abi-content.expanded {
            display: block;
        }
        
        @media (max-width: 768px) {
            .docs-content {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: static;
            }
            
            .docs-header h1 {
                font-size: 2rem;
            }
            
            .grid-2 {
                grid-template-columns: 1fr;
            }
            
            .network-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <nav class="nav">
                <div class="logo">
                    <span>Lendefi Markets</span>
                </div>
                <div class="nav-links">
                    <a href="/">Home</a>
                    <a href="index.html">Documentation</a>
                    <a href="api-reference.html">API Reference</a>
                    <a href="liquidation-system.html">Liquidation System</a>
                    <a href="/contact">Contact</a>
                </div>
            </nav>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="docs-header">
                <h1><span class="gradient-text">Smart Contracts</span></h1>
                <p>Complete contract addresses, ABIs, and deployment information for Lendefi Markets</p>
            </div>

            <div class="docs-content">
                <aside class="sidebar">
                    <h3>Table of Contents</h3>
                    <ul>
                        <li><a href="#overview">Protocol Overview</a></li>
                        <li><a href="#deployments">Contract Deployments</a></li>
                        <li><a href="#core-contracts">Core Contracts</a></li>
                        <li><a href="#factory">LendefiMarketFactory</a></li>
                        <li><a href="#core">LendefiCore</a></li>
                        <li><a href="#vault">LendefiMarketVault</a></li>
                        <li><a href="#assets">LendefiAssets</a></li>
                        <li><a href="#liquidator">Liquidation System</a></li>
                        <li><a href="#interfaces">Interfaces</a></li>
                        <li><a href="#libraries">Libraries</a></li>
                        <li><a href="#abis">Contract ABIs</a></li>
                    </ul>
                </aside>

                <div class="content">
                    <section id="overview">
                        <h2>Protocol Overview</h2>
                        <p>Lendefi Markets is a composable multi-tenant lending protocol that enables market owners to create isolated lending markets for any base asset. The protocol uses a modular architecture with upgradeable contracts and comprehensive access controls.</p>
                        
                        <div class="highlight">
                            <strong>Key Architecture Features:</strong>
                            <ul>
                                <li><strong>Multi-Tenant:</strong> Each market owner deploys isolated markets</li>
                                <li><strong>Upgradeable:</strong> UUPS proxy pattern with timelock governance</li>
                                <li><strong>Modular:</strong> Separate contracts for different functionalities</li>
                                <li><strong>ERC-4626 Compliant:</strong> Standard vault interfaces for DeFi integration</li>
                                <li><strong>MEV Protected:</strong> Built-in slippage and same-block protections</li>
                            </ul>
                        </div>
                    </section>

                    <section id="deployments">
                        <h2>Contract Deployments</h2>
                        
                        <div class="network-selector">
                            <h4>Select Network</h4>
                            <div class="network-buttons">
                                <button class="network-btn active" data-network="sepolia">Sepolia Testnet</button>
                                <button class="network-btn" data-network="mainnet">Ethereum Mainnet</button>
                            </div>
                        </div>

                        <div id="sepolia-deployments">
                            <h3>Sepolia Testnet Deployments</h3>
                            <table class="deployment-table">
                                <thead>
                                    <tr>
                                        <th>Contract</th>
                                        <th>Address</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>LendefiMarketFactory</td>
                                        <td>0x1234...5678 <button class="copy-btn" onclick="copyAddress('0x1234567890123456789012345678901234567890')">Copy</button></td>
                                        <td><a href="https://sepolia.etherscan.io/address/0x1234567890123456789012345678901234567890" target="_blank" style="color: #14b8a6;">View on Etherscan</a></td>
                                    </tr>
                                    <tr>
                                        <td>LendefiCore (Implementation)</td>
                                        <td>0x2345...6789 <button class="copy-btn" onclick="copyAddress('0x2345678901234567890123456789012345678901')">Copy</button></td>
                                        <td><a href="https://sepolia.etherscan.io/address/0x2345678901234567890123456789012345678901" target="_blank" style="color: #14b8a6;">View on Etherscan</a></td>
                                    </tr>
                                    <tr>
                                        <td>LendefiMarketVault (Implementation)</td>
                                        <td>0x3456...7890 <button class="copy-btn" onclick="copyAddress('0x3456789012345678901234567890123456789012')">Copy</button></td>
                                        <td><a href="https://sepolia.etherscan.io/address/0x3456789012345678901234567890123456789012" target="_blank" style="color: #14b8a6;">View on Etherscan</a></td>
                                    </tr>
                                    <tr>
                                        <td>LendefiAssets (Implementation)</td>
                                        <td>0x4567...8901 <button class="copy-btn" onclick="copyAddress('0x4567890123456789012345678901234567890123')">Copy</button></td>
                                        <td><a href="https://sepolia.etherscan.io/address/0x4567890123456789012345678901234567890123" target="_blank" style="color: #14b8a6;">View on Etherscan</a></td>
                                    </tr>
                                    <tr>
                                        <td>FlashLoanRecipient (Liquidator)</td>
                                        <td>0x5678...9012 <button class="copy-btn" onclick="copyAddress('0x5678901234567890123456789012345678901234')">Copy</button></td>
                                        <td><a href="https://sepolia.etherscan.io/address/0x5678901234567890123456789012345678901234" target="_blank" style="color: #14b8a6;">View on Etherscan</a></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div id="mainnet-deployments" style="display: none;">
                            <h3>Ethereum Mainnet Deployments</h3>
                            <div class="info-box yellow">
                                <strong>‚ö†Ô∏è Coming Soon:</strong> Mainnet deployment is planned after successful testnet validation and security audits.
                            </div>
                        </div>
                    </section>

                    <section id="core-contracts">
                        <h2>Core Contracts</h2>
                        <p>The Lendefi protocol consists of five main contract types that work together to provide a complete lending market infrastructure.</p>

                        <div class="grid-2">
                            <div class="contract-card">
                                <div class="contract-title">üè≠ LendefiMarketFactory</div>
                                <p>Factory contract for creating isolated lending markets. Manages market deployment, base asset allowlists, and implementation upgrades.</p>
                            </div>
                            
                            <div class="contract-card">
                                <div class="contract-title">‚ö° LendefiCore</div>
                                <p>Core lending protocol handling positions, collateral management, borrowing, repayment, and liquidations.</p>
                            </div>
                            
                            <div class="contract-card">
                                <div class="contract-title">üè¶ LendefiMarketVault</div>
                                <p>ERC-4626 compliant vault for base asset tokenization, liquidity management, and flash loans.</p>
                            </div>
                            
                            <div class="contract-card">
                                <div class="contract-title">üìä LendefiAssets</div>
                                <p>Asset configuration, oracle management, and collateral tier system for risk assessment.</p>
                            </div>
                        </div>
                    </section>

                    <section id="factory">
                        <h2>LendefiMarketFactory</h2>
                        
                        <div class="info-box blue">
                            <strong>Purpose:</strong> Factory contract for creating and managing complete lending markets with multi-tenant support. Each market owner can deploy isolated markets for approved base assets.
                        </div>

                        <h3>Key Functions</h3>
                        
                        <div class="code-block">
                            <pre><code class="language-solidity">// Create a new lending market
function createMarket(
    address baseAsset,
    string memory name,
    string memory symbol
) external returns (Market memory market);

// Get market information
function getMarketInfo(
    address owner,
    address baseAsset
) external view returns (Market memory);

// Check if base asset is allowed
function isBaseAssetAllowed(address asset) external view returns (bool);

// Get all active markets
function getAllActiveMarkets() external view returns (Market[] memory);</code></pre>
                        </div>

                        <h3>Access Control Roles</h3>
                        <div class="grid-2">
                            <div class="info-box green">
                                <h5>Administrative Roles</h5>
                                <ul>
                                    <li><strong>DEFAULT_ADMIN_ROLE:</strong> Timelock contract</li>
                                    <li><strong>MANAGER_ROLE:</strong> Asset allowlist management</li>
                                    <li><strong>UPGRADER_ROLE:</strong> Contract upgrades</li>
                                </ul>
                            </div>
                            
                            <div class="info-box purple">
                                <h5>Operational Roles</h5>
                                <ul>
                                    <li><strong>MARKET_OWNER_ROLE:</strong> Market creation</li>
                                    <li><strong>PAUSER_ROLE:</strong> Emergency pause</li>
                                </ul>
                            </div>
                        </div>

                        <h3>Events</h3>
                        <div class="code-block">
                            <pre><code class="language-solidity">event MarketCreated(
    address indexed owner,
    address indexed baseAsset,
    address core,
    address vault,
    address assets,
    address porFeed
);

event BaseAssetAdded(address indexed asset);
event BaseAssetRemoved(address indexed asset);</code></pre>
                        </div>
                    </section>

                    <section id="core">
                        <h2>LendefiCore</h2>
                        
                        <div class="info-box blue">
                            <strong>Purpose:</strong> Core lending protocol handling collateral management, borrowing, repayment, and liquidations. Manages individual positions with isolated vault contracts.
                        </div>

                        <h3>Position Management</h3>
                        <div class="code-block">
                            <pre><code class="language-solidity">// Create new lending position
function createPosition(
    address collateralAsset,
    bool isIsolated
) external returns (uint256 positionId);

// Supply collateral to position
function supplyCollateral(
    address asset,
    uint256 amount,
    uint256 positionId
) external;

// Borrow against collateral
function borrow(
    uint256 positionId,
    uint256 amount,
    uint256 expectedCreditLimit,
    uint32 maxSlippageBps
) external;</code></pre>
                        </div>

                        <h3>Position Analysis Functions</h3>
                        <div class="code-block">
                            <pre><code class="language-solidity">// Calculate current debt with interest
function calculateDebtWithInterest(
    address user,
    uint256 positionId
) external view returns (uint256);

// Calculate credit limit
function calculateCreditLimit(
    address user,
    uint256 positionId
) external view returns (uint256);

// Check position health factor
function healthFactor(
    address user,
    uint256 positionId
) external view returns (uint256);

// Check if position can be liquidated
function isLiquidatable(
    address user,
    uint256 positionId
) external view returns (bool);</code></pre>
                        </div>

                        <h3>Key Events</h3>
                        <div class="code-block">
                            <pre><code class="language-solidity">event PositionCreated(
    address indexed user,
    uint256 indexed positionId,
    address vault,
    bool isIsolated
);

event SupplyCollateral(
    address indexed user,
    uint256 indexed positionId,
    address indexed asset,
    uint256 amount
);

event Borrow(
    address indexed user,
    uint256 indexed positionId,
    uint256 amount,
    uint256 newDebt
);

event Liquidated(
    address indexed user,
    uint256 indexed positionId,
    address indexed liquidator,
    uint256 debtCovered,
    uint256 collateralSeized
);</code></pre>
                        </div>
                    </section>

                    <section id="vault">
                        <h2>LendefiMarketVault</h2>
                        
                        <div class="info-box blue">
                            <strong>Purpose:</strong> ERC-4626 compliant vault for base asset tokenization and liquidity management. Provides flash loans and handles yield distribution.
                        </div>

                        <h3>ERC-4626 Standard Functions</h3>
                        <div class="code-block">
                            <pre><code class="language-solidity">// Deposit assets for shares
function deposit(uint256 assets, address receiver) external returns (uint256 shares);

// Withdraw assets by burning shares
function withdraw(
    uint256 assets,
    address receiver,
    address owner
) external returns (uint256 shares);

// Redeem shares for assets
function redeem(
    uint256 shares,
    address receiver,
    address owner
) external returns (uint256 assets);

// Get total vault assets
function totalAssets() external view returns (uint256);</code></pre>
                        </div>

                        <h3>Flash Loan System</h3>
                        <div class="code-block">
                            <pre><code class="language-solidity">// Execute flash loan
function flashLoan(
    address receiver,
    uint256 amount,
    bytes calldata data
) external;

// Flash loan fee (9 basis points)
function flashFee(address token, uint256 amount) external view returns (uint256);

// Maximum flash loan amount
function maxFlashLoan(address token) external view returns (uint256);</code></pre>
                        </div>

                        <h3>Yield and Rewards</h3>
                        <div class="code-block">
                            <pre><code class="language-solidity">// Current supply rate (APY)
function getSupplyRate() external view returns (uint256);

// Current utilization rate
function utilization() external view returns (uint256);

// Check reward eligibility
function isRewardable(address user) external view returns (bool);

// Claim governance rewards
function claimReward() external returns (uint256);</code></pre>
                        </div>
                    </section>

                    <section id="assets">
                        <h2>LendefiAssets</h2>
                        
                        <div class="info-box blue">
                            <strong>Purpose:</strong> Asset configuration, oracle management, and collateral tier system. Handles price feeds and risk parameters for all supported assets.
                        </div>

                        <h3>Asset Configuration</h3>
                        <div class="code-block">
                            <pre><code class="language-solidity">// Update complete asset configuration
function updateAssetConfig(
    address asset,
    Asset memory config
) external;

// Get current asset price
function getAssetPrice(address asset) external view returns (uint256);

// Get asset information
function getAssetInfo(address asset) external view returns (Asset memory);

// Check if asset is at capacity
function isAssetAtCapacity(address asset, uint256 amount) external view returns (bool);</code></pre>
                        </div>

                        <h3>Collateral Tier System</h3>
                        <div class="info-box green">
                            <strong>Collateral Tiers:</strong>
                            <ul>
                                <li><strong>STABLE (0):</strong> Stablecoins - 5% jump rate, 1% liquidation fee</li>
                                <li><strong>CROSS_A (1):</strong> Blue-chip assets - 8% jump rate, 2% liquidation fee</li>
                                <li><strong>CROSS_B (2):</strong> Established altcoins - 12% jump rate, 3% liquidation fee</li>
                                <li><strong>ISOLATED (3):</strong> High-risk assets - 15% jump rate, 4% liquidation fee</li>
                            </ul>
                        </div>

                        <h3>Oracle Management</h3>
                        <div class="code-block">
                            <pre><code class="language-solidity">// Update Chainlink oracle configuration
function updateChainlinkOracle(
    address asset,
    ChainlinkOracleConfig memory config
) external;

// Update Uniswap V3 oracle configuration
function updateUniswapOracle(
    address asset,
    UniswapPoolConfig memory config
) external;

// Check price deviation between oracles
function checkPriceDeviation(address asset) external view returns (uint256);</code></pre>
                        </div>
                    </section>

                    <section id="liquidator">
                        <h2>Liquidation System</h2>
                        
                        <div class="info-box blue">
                            <strong>Purpose:</strong> Example liquidation contract utilizing flash loans for capital-efficient liquidations. Integrates with Balancer for flash loans and Uniswap for asset swapping.
                        </div>

                        <div class="warning">
                            <strong>üìã Note:</strong> This is a reference implementation. Liquidators can build their own strategies using any capital source and DEX aggregator. See the <a href="liquidation-system.html" style="color: #14b8a6;">Liquidation System</a> documentation for complete details.
                        </div>

                        <h3>Liquidation Functions</h3>
                        <div class="code-block">
                            <pre><code class="language-solidity">// Liquidate undercollateralized position
function liquidate(
    address borrower,
    uint256 positionId,
    uint256 expectedCost,
    uint32 maxSlippageBps
) external;

// Flash loan callback from Balancer
function receiveFlashLoan(
    IERC20[] memory tokens,
    uint256[] memory amounts,
    uint256[] memory feeAmounts,
    bytes memory userData
) external;

// Extract liquidation profits
function withdraw(address token, uint256 amount) external;</code></pre>
                        </div>
                    </section>

                    <section id="interfaces">
                        <h2>Interfaces</h2>
                        <p>All core contracts implement comprehensive interfaces for integration and testing. Key interfaces include:</p>

                        <div class="grid-2">
                            <div class="info-box green">
                                <h5>Core Interfaces</h5>
                                <ul>
                                    <li><code>ILendefiMarketFactory</code></li>
                                    <li><code>ILendefiCore</code></li>
                                    <li><code>ILendefiMarketVault</code></li>
                                    <li><code>ILendefiAssets</code></li>
                                </ul>
                            </div>
                            
                            <div class="info-box blue">
                                <h5>Standard Interfaces</h5>
                                <ul>
                                    <li><code>IERC4626</code> - Vault standard</li>
                                    <li><code>IERC3156</code> - Flash loan standard</li>
                                    <li><code>IAccessControl</code> - Role management</li>
                                    <li><code>IERC165</code> - Interface detection</li>
                                </ul>
                            </div>
                        </div>
                    </section>

                    <section id="libraries">
                        <h2>Libraries</h2>
                        <p>The protocol includes several utility libraries for common operations:</p>

                        <div class="code-block">
                            <pre><code class="language-solidity">// LendefiConstants - Protocol constants
library LendefiConstants {
    uint256 public constant RATE_PRECISION = 1e6;
    uint256 public constant PRICE_PRECISION = 1e6;
    uint256 public constant MAX_COLLATERAL_ASSETS = 20;
    uint256 public constant LIQUIDATION_THRESHOLD = 1e6;
}

// LendefiRates - Interest rate calculations
library LendefiRates {
    function calculateInterestRate(
        uint256 utilization,
        uint256 baseRate,
        uint256 jumpRate,
        uint256 kink
    ) external pure returns (uint256);
}

// UniswapTickMath - Tick mathematics for Uniswap V3
library UniswapTickMath {
    function getSqrtRatioAtTick(int24 tick) external pure returns (uint160);
}</code></pre>
                        </div>
                    </section>

                    <section id="abis">
                        <h2>Contract ABIs</h2>
                        <p>Download complete ABIs for integration with the Lendefi protocol. All ABIs are generated from the latest deployed contracts.</p>

                        <div class="abi-section">
                            <div class="abi-title" onclick="toggleAbi('factory-abi')">
                                LendefiMarketFactory ABI
                                <span>‚ñº</span>
                            </div>
                            <div class="abi-content" id="factory-abi">
                                <div class="code-block">
                                    <pre><code class="language-json">[
  {
    "inputs": [
      {"internalType": "address", "name": "baseAsset", "type": "address"},
      {"internalType": "string", "name": "name", "type": "string"},
      {"internalType": "string", "name": "symbol", "type": "string"}
    ],
    "name": "createMarket",
    "outputs": [
      {
        "components": [
          {"internalType": "address", "name": "owner", "type": "address"},
          {"internalType": "address", "name": "baseAsset", "type": "address"},
          {"internalType": "address", "name": "core", "type": "address"},
          {"internalType": "address", "name": "baseVault", "type": "address"},
          {"internalType": "address", "name": "assetsModule", "type": "address"},
          {"internalType": "address", "name": "porFeed", "type": "address"}
        ],
        "internalType": "struct ILendefiMarketFactory.Market",
        "name": "market",
        "type": "tuple"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]</code></pre>
                                </div>
                                <button class="copy-btn" onclick="downloadAbi('factory')">Download Full ABI</button>
                            </div>
                        </div>

                        <div class="abi-section">
                            <div class="abi-title" onclick="toggleAbi('core-abi')">
                                LendefiCore ABI
                                <span>‚ñº</span>
                            </div>
                            <div class="abi-content" id="core-abi">
                                <div class="code-block">
                                    <pre><code class="language-json">[
  {
    "inputs": [
      {"internalType": "address", "name": "collateralAsset", "type": "address"},
      {"internalType": "bool", "name": "isIsolated", "type": "bool"}
    ],
    "name": "createPosition",
    "outputs": [
      {"internalType": "uint256", "name": "positionId", "type": "uint256"}
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]</code></pre>
                                </div>
                                <button class="copy-btn" onclick="downloadAbi('core')">Download Full ABI</button>
                            </div>
                        </div>

                        <div class="info-box blue">
                            <strong>üìÅ ABI Files:</strong> Complete ABI files are available in the <code>/out</code> directory of the deployed contracts repository. These include full function signatures, events, and error definitions.
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </main>

    <!-- Prism.js for syntax highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <script>
        // Network selector functionality
        document.querySelectorAll('.network-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                // Remove active class from all buttons
                document.querySelectorAll('.network-btn').forEach(b => b.classList.remove('active'));
                // Add active class to clicked button
                btn.classList.add('active');
                
                // Show/hide deployment tables
                const network = btn.dataset.network;
                document.getElementById('sepolia-deployments').style.display = 
                    network === 'sepolia' ? 'block' : 'none';
                document.getElementById('mainnet-deployments').style.display = 
                    network === 'mainnet' ? 'block' : 'none';
            });
        });

        // Copy address functionality
        function copyAddress(address) {
            navigator.clipboard.writeText(address).then(() => {
                // Show copied feedback
                event.target.textContent = 'Copied!';
                setTimeout(() => {
                    event.target.textContent = 'Copy';
                }, 2000);
            });
        }

        // Toggle ABI display
        function toggleAbi(abiId) {
            const content = document.getElementById(abiId);
            const isExpanded = content.classList.contains('expanded');
            
            // Close all other ABIs
            document.querySelectorAll('.abi-content').forEach(abi => {
                abi.classList.remove('expanded');
            });
            
            // Toggle current ABI
            if (!isExpanded) {
                content.classList.add('expanded');
            }
            
            // Update arrow
            const arrow = event.currentTarget.querySelector('span');
            arrow.textContent = isExpanded ? '‚ñº' : '‚ñ≤';
        }

        // Download ABI functionality
        function downloadAbi(contractName) {
            // This would typically fetch the actual ABI from your deployment artifacts
            alert(`Download ${contractName} ABI functionality would be implemented here`);
        }
    </script>
</body>
</html>